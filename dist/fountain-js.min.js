!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("fountain-js",[],t):"object"==typeof exports?exports["fountain-js"]=t():e["fountain-js"]=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var s=a[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),r=n(s),l=function i(e,t){return i.parse(e,t)};l.parse=function(e,t,a){return(0,r["default"])(e,t,a)},t["default"]=l,e.exports=t["default"]},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),r=n(s),l=a(4),i=n(l),u=function(e,t,a){void 0===a&&"function"==typeof t&&(a=t,t=void 0);for(var n=(0,i["default"])(e),s=n.length,l=void 0,u=void 0,d=[],p=[];s--;)switch(l=n[s],l.text=r["default"].lexer(l.text),l.type){case"title":d.push("<h1>"+l.text+"</h1>"),u=l.text.replace("<br />"," ").replace(/<(?:.|\n)*?>/g,"");break;case"credit":d.push('<p class="credit">'+l.text+"</p>");break;case"author":d.push('<p class="authors">'+l.text+"</p>");break;case"authors":d.push('<p class="authors">'+l.text+"</p>");break;case"source":d.push('<p class="source">'+l.text+"</p>");break;case"notes":d.push('<p class="notes">'+l.text+"</p>");break;case"draft_date":d.push('<p class="draft-date">'+l.text+"</p>");break;case"date":d.push('<p class="date">'+l.text+"</p>");break;case"contact":d.push('<p class="contact">'+l.text+"</p>");break;case"copyright":d.push('<p class="copyright">'+l.text+"</p>");break;case"scene_heading":p.push("<h3"+(l.scene_number?' id="'+l.scene_number+'">':">")+l.text+"</h3>");break;case"transition":p.push("<h2>"+l.text+"</h2>");break;case"dual_dialogue_begin":p.push('<div class="dual-dialogue">');break;case"dialogue_begin":p.push('<div class="dialogue'+(l.dual?" "+l.dual:"")+'">');break;case"character":p.push("<h4>"+l.text+"</h4>");break;case"parenthetical":p.push('<p class="parenthetical">'+l.text+"</p>");break;case"dialogue":p.push("<p>"+l.text+"</p>");break;case"dialogue_end":p.push("</div> ");break;case"dual_dialogue_end":p.push("</div> ");break;case"section":p.push('<p class="section" data-depth="'+l.depth+'">'+l.text+"</p>");break;case"synopsis":p.push('<p class="synopsis">'+l.text+"</p>");break;case"note":p.push("<!-- "+l.text+"-->");break;case"boneyard_begin":p.push("<!-- ");break;case"boneyard_end":p.push(" -->");break;case"action":p.push("<p>"+l.text+"</p>");break;case"centered":p.push('<p class="centered">'+l.text+"</p>");break;case"page_break":p.push("<hr />");break;case"line_break":p.push("<br />");break;default:console.log("Unexpected Token type",l.text)}var c={title:u,html:{titlePage:d.join(""),script:p.join("")},tokens:t?n.reverse():void 0};return"function"==typeof a?a(c):c};t["default"]=u,e.exports=t["default"]},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),r=n(s),l={note:"<!-- $1 -->",line_break:"<br />",bold_italic_underline:'<span class="bold italic underline">$2</span>',bold_underline:'<span class="bold underline">$2</span>',italic_underline:'<span class="italic underline">$2</span>',bold_italic:'<span class="bold italic">$2</span>',bold:'<span class="bold">$2</span>',italic:'<span class="italic">$2</span>',underline:'<span class="underline">$2</span>'};l.lexer=function(e){if(e){var t=["underline","italic","bold","bold_italic","italic_underline","bold_underline","bold_italic_underline"],a=t.length,n=void 0,s=void 0;for(e=e.replace(r["default"].note_inline,l.note).replace(/\\\*/g,"[star]").replace(/\\_/g,"[underline]").replace(/\n/g,l.line_break);a--;)n=t[a],s=r["default"][n],s.test(e)&&(e=e.replace(s,l[n]));return e.replace(/\[star\]/g,"*").replace(/\[underline\]/g,"_").trim()}},t["default"]=l,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={title_page:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,scene_heading:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,scene_number:/( *#(.+)# *)/,transition:/^((?:FADE (?:TO BLACK|OUT)|CUT TO BLACK)\.|.+ TO\:)|^(?:> *)(.+)/,dialogue:/^([A-Z*_]+[0-9A-Z (._\-')]*)(\^?)?(?:\n(?!\n+))([\s\S]+)/,parenthetical:/^(\(.+\))$/,action:/^(.+)/g,centered:/^(?:> *)(.+)(?: *<)(\n.+)*/g,section:/^(#+)(?: *)(.*)/,synopsis:/^(?:\=(?!\=+) *)(.*)/,note:/^(?:\[{2}(?!\[+))(.+)(?:\]{2}(?!\[+))$/,note_inline:/(?:\[{2}(?!\[+))([\s\S]+?)(?:\]{2}(?!\[+))/g,boneyard:/(^\/\*|^\*\/)$/g,page_break:/^\={3,}$/,line_break:/^ {2}$/,emphasis:/(_|\*{1,3}|_\*{1,3}|\*{1,3}_)(.+)(_|\*{1,3}|_\*{1,3}|\*{1,3}_)/g,bold_italic_underline:/(_{1}\*{3}(?=.+\*{3}_{1})|\*{3}_{1}(?=.+_{1}\*{3}))(.+?)(\*{3}_{1}|_{1}\*{3})/g,bold_underline:/(_{1}\*{2}(?=.+\*{2}_{1})|\*{2}_{1}(?=.+_{1}\*{2}))(.+?)(\*{2}_{1}|_{1}\*{2})/g,italic_underline:/(?:_{1}\*{1}(?=.+\*{1}_{1})|\*{1}_{1}(?=.+_{1}\*{1}))(.+?)(\*{1}_{1}|_{1}\*{1})/g,bold_italic:/(\*{3}(?=.+\*{3}))(.+?)(\*{3})/g,bold:/(\*{2}(?=.+\*{2}))(.+?)(\*{2})/g,italic:/(\*{1}(?=.+\*{1}))(.+?)(\*{1})/g,underline:/(_{1}(?=.+_{1}))(.+?)(_{1})/g,splitter:/\n{2,}/g,cleaner:/^\n+|\n+$/,standardizer:/\r\n|\r/g,whitespacer:/^\t+|^ {3,}/gm};t["default"]=a,e.exports=t["default"]},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),r=n(s),l=a(5),i=n(l),u=function(e){for(var t=(0,i["default"])(e).split(r["default"].splitter),a=t.length,n=void 0,s=void 0,l=void 0,u=void 0,d=void 0,p=void 0,c=void 0,o=void 0,_=[];a--;)if(n=t[a],r["default"].title_page.test(n))for(s=n.replace(r["default"].title_page,"\n$1").split(r["default"].splitter).reverse(),p=0,c=s.length;p<c;p++)l=s[p].replace(r["default"].cleaner,"").split(/\:\n*/),_.push({type:l[0].trim().toLowerCase().replace(" ","_"),text:l[1].trim()});else if(s=n.match(r["default"].scene_heading))u=s[1]||s[2],u.indexOf("  ")!==u.length-2&&((d=u.match(r["default"].scene_number))&&(d=d[2],u=u.replace(r["default"].scene_number,"")),_.push({type:"scene_heading",text:u,scene_number:d||void 0}));else if(s=n.match(r["default"].centered))_.push({type:"centered",text:s[0].replace(/>|</g,"")});else if(s=n.match(r["default"].transition))_.push({type:"transition",text:s[1]||s[2]});else if((s=n.match(r["default"].dialogue))&&s[1].indexOf("  ")!==s[1].length-2){for(s[2]&&_.push({type:"dual_dialogue_end"}),_.push({type:"dialogue_end"}),l=s[3].split(/(\(.+\))(?:\n+)/).reverse(),p=0,c=l.length;p<c;p++)u=l[p],u.length>0&&_.push({type:r["default"].parenthetical.test(u)?"parenthetical":"dialogue",text:u});_.push({type:"character",text:s[1].trim()}),_.push({type:"dialogue_begin",dual:s[2]?"right":o?"left":void 0}),o&&_.push({type:"dual_dialogue_begin"}),o=!!s[2]}else(s=n.match(r["default"].section))?_.push({type:"section",text:s[2],depth:s[1].length}):(s=n.match(r["default"].synopsis))?_.push({type:"synopsis",text:s[1]}):(s=n.match(r["default"].note))?_.push({type:"note",text:s[1]}):(s=n.match(r["default"].boneyard))?_.push({type:"/"===s[0][0]?"boneyard_begin":"boneyard_end"}):r["default"].page_break.test(n)?_.push({type:"page_break"}):r["default"].line_break.test(n)?_.push({type:"line_break"}):_.push({type:"action",text:n});return _};t["default"]=u,e.exports=t["default"]},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),r=n(s),l=function(e){return e.replace(r["default"].boneyard,"\n$1\n").replace(r["default"].standardizer,"\n").replace(r["default"].cleaner,"").replace(r["default"].whitespacer,"")};t["default"]=l,e.exports=t["default"]}])});
//# sourceMappingURL=fountain-js.min.js.map